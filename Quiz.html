<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html><meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <head>
<title> A Small Quiz</title>
</head>

<body onLoad= "loadQuestionArray()">
<h1></h1>

<script language= "javascript" type=text/javascript>
//step1: perform authentication
//NOTE be sure to scrub/clean any data before db submission

// global variables
var max= 0;
var total= 0;
var correct;
var answer;
var id;
var lastquestion = false;

var q;
var question_array = [];
var answer_array = [];

var questions;
var questionsPerPage;

var currentQuestion = 0;


//TODO: create an array of question objects


//load question [from database, array ...]

function loadQuestionArray() {
//TODO: Load the question into the question object here.
//type 0: true false , 1: undefined 2: two choice, 3:three choice,4:four choice, 5: five choice
questions = 5;
questionsPerPage =3;

var q1 = new Object();

q1.id = 5;
q1.type = 2;
q1.question= "Is the sky blue?";
q1.answer = 1;
q1.points_max = 2;
q1.points_a = 2;
q1.points_b = -2;

question_array.push(q1);

var q1 = new Object();

q1.id = 2;
q1.type = 2;
q1.question= "Do wild bears live in the woods?";
q1.answer = 1;
q1.points_max = 2;
q1.points_a = 2;
q1.points_b = -2;

question_array.push(q1);

var q1 = new Object();

q1.id = 1;
q1.type = 2;
q1.question= "Is the pope Catholic?";
q1.answer = 1;
q1.points_max = 2;
q1.points_a = 2;
q1.text_a = "TRUE";
q1.points_b = -2;
q1.text_b = "FALSE";

question_array.push(q1);


var q1 = new Object();

q1.id = 3;
q1.type = 2;
q1.question= "Which of these is NOT an animal?";
q1.answer = 3;
q1.points_max = 2;
q1.text_a = "Frog";
q1.points_b = 0;
q1.text_b = "Zebra";
q1.points_c = 2;
q1.text_c = "Baseball";

question_array.push(q1);

var q1 = new Object();

q1.id = 7;
q1.type = 3;
q1.question= "Which of these is an amphibian?";
q1.answer = 1;
q1.points_max = 2;
q1.points_a = 2;
q1.text_a = "Frog";
q1.points_b = 0;
q1.text_b = "Zebra";
q1.points_c = 0;
q1.text_c = "Baseball";

question_array.push(q1);

var q1 = new Object();

q1.id = 4;
q1.type = 4;
q1.question= "How many psychiatrist does it take to change a lightbulb?";
q1.answer = 1;
q1.points_max = 2;
q1.points_a = 0;
q1.text[0] = "Frog";
q1.points_b = 0;
q1.text[1] = "Zebra";
q1.points_c = 0;
q1.text[2] = "Baseball";
q1.points_d = 2;
q1.text[3] = "One, but the lightbulb has to want to change.";

question_array.push(q1);

loadQuestion();
}


function loadQuestion() {


var sel = ['0','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P'];



for (j= currentQuestion; j< currentQuestion + questionsPerPage; j++) {

if (currentQuestion < questions ){
q = new Object();
q = question_array[j];
id = q.id;
var numAns = q.type;

var p = document.createTextNode( q.question);
var r = document.createElement("br");

var x= document.body.appendChild(p);
var x = document.body.appendChild(r);

for (i=1 ; i <= numAns ; i++){

    var p = document.createElement("input");
    p.setAttribute("type", "button");
    p.setAttribute("value", sel[i] );
    p.setAttribute("name", j + sel[i]);
    p.setAttribute("onclick", "selectAnswer(" + j + "," + i + ")" );

var r = document.createElement("br");

var x= document.body.appendChild(p);
var x = document.body.appendChild(r);
}
var r = document.createElement("br");
var x = document.body.appendChild(r);
}


}
currentQuestion += questionsPerPage;

}



function getPoints(ans){

switch (ans) {

case 1:
  return q.points_a;
  break;

case 2:
  return q.points_b;
  break;

case 3:
  return q.points_c;
  break;

case 4:
  return q.points_d;
  break;

case 5:
  return q.points_e;
  break;

case false:
  return q.points_false;
  break;

case true:
  return q.points_true;
  break;


default:
  
  alert("answer not selected");
  return 0;
  break;

}


}

function selectAnswer(quest, ans){
//add (question_id,answer) to answers array
q = question_array[quest];

var myAnswer = new Object();
myAnswer.id = q.id;

myAnswer.answer = ans;

myAnswer.points = getPoints(ans);

answer_array[quest] = myAnswer;

document.getElementById("questionID").innerHTML= q.id;
document.getElementById("myanswer").innerHTML= ans;
}


function submitAnswer(){
//clear old questions


if (currentQuestion < questions){
//add display new questions
loadQuestion();
}else {
tally();
}

}

function tally(){
max = 0;
score = 0;
var Answer = new Object();
temp = [];
temp1 =[];
temp2 = [];

// for each element in answers array
for (i=(answer_array.length -1); i>= 0 ; i--) {

Answer = answer_array[i];

temp.push(Answer.answer);
temp1.push(Answer.id);
temp2.push(Answer.points);

score += Answer.points;
}

document.getElementById("questionID").innerHTML= temp1;
document.getElementById("myanswer").innerHTML= temp;
document.getElementById("points").innerHTML= temp2;
document.getElementById("totalScore").innerHTML= score;

}

</script>


<p> <input type="button" value="Submit Answer" onclick="submitAnswer()" /> <p>


<p> Questions: <i id= "questionID"> </i> </p>
<p> Your Answers:<i id= "myanswer"> </i> </p>
<p> Your Points: <i id = "points"> </i> </p>
<p> TotalScore: <i id="totalScore"> </i> </p>


<hr>
<address></address>

</body> </html>